<div class= "container">
 <%= render 'public/posts/flash' %>
  
 <div class= "card mt-4 mb-4 w-auto">
  <h3 class= "card-header">投稿一覧(管理者)</h3>
  <div class= "card-body">
    <div class= "row-cols-2-flex">
     <div class= "card-list-container py-5 mx-auto d-flex justify-content-center flex-wrap">
     <% @posts.each do |post| %>
      <div class= "card mt-4 mr-2 col-sm-12 col-lg-5">
       <%= image_tag post.get_image(330, 330), class: "card-image-top"%>
       <div class= "card-body">
        <div class= "row">
         <div class= "col-8 mx-auto">
          <p class= "card-title">タイトル:
           <%= post.title %>
          </p>
       
          <p class= "card-item_title">商品名:
           <%= post.item.name %>
          </p>
          
          <p class= "card-item-genre">商品ジャンル：
           <%= post.item.genre.name %>
          </p>
          
          <p class= "card-item-price">商品価格:
           <%= post.item.price %>円
          </p>
          
          <p class= "card-donation_destination_name">寄付先：
           <%= post.item.donation_destination.name %>
          </p>
          
          <p class= "card-donation_destination_location">寄付先都道府県：
           <%= post.item.donation_destination.location_i18n %>
          </p>
          
          <p class= "card-post_comments_counts">コメント件数:
           <%= post.post_comments.count %>件
          </p>
          
          <p>
           ブックマーク:
           <%= post.favorites.count %>件
          </p>
          
          <p id= "star_<%= post.id %>">評価</p>
          
          <script>
           $(document).on('turbolinks:load', function() {
           let elem = document.querySelector('#star_<%= post.id %>');
           if (elem == null) return;
  
            elem.innerHTML = "";
            let opt = {  
            starOn: "<%= asset_path('star-on.png') %>",
            starOff: "<%= asset_path('star-off.png') %>",
            score: "<%= post.star %>",
            half: false,
            readOnly: true,
            };
            raty(elem, opt);
           });
          </script>
          
          <p>
           タグ: 
           <%= post.tag %>
          </p>
          
          <%= link_to admin_post_path(post), method: :delete, "data-confirm" => "本当に削除しますか？", class: "btn btn-danger" do %>
           削除する
          <% end %>
          <div class= "row mt-2 mx-auto">
           <%= link_to admin_post_path(post), class: "btn btn-info" do %>
            詳細
           <% end %>
          </div>
         </div>
        </div>
       </div>
      </div>
     <% end %>
     </div>
     <%= paginate @posts %>
    </div>
   </div>
 </div>
</div>